{"remainingRequest":"/myp/vue/sell/node_modules/thread-loader/dist/cjs.js!/myp/vue/sell/node_modules/babel-loader/lib/index.js??ref--16-2!/myp/vue/sell/node_modules/cache-loader/dist/cjs.js??ref--0-0!/myp/vue/sell/node_modules/vue-loader/lib/index.js??vue-loader-options!/myp/vue/sell/src/components/food/food.vue?vue&type=script&lang=js&","dependencies":[{"path":"/myp/vue/sell/src/components/food/food.vue","mtime":1580629947000},{"path":"/myp/vue/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/myp/vue/sell/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/myp/vue/sell/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/myp/vue/sell/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/myp/vue/sell/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmciOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgQ2FydENvbnRyb2wgZnJvbSAnY29tcG9uZW50cy9jYXJ0Y29udHJvbC9jYXJ0Y29udHJvbC52dWUnOwppbXBvcnQgU3BsaWNlTGluZSBmcm9tICdjb21wb25lbnRzL3NwbGljZWxpbmUvc3BsaWNlbGluZS52dWUnOwppbXBvcnQgUmF0aW5nc2VsZWN0IGZyb20gJ2NvbXBvbmVudHMvcmF0aW5nc2VsZWN0L3JhdGluZ3NlbGVjdC52dWUnOwppbXBvcnQgeyBmb3JtYXREYXRlIGFzIF9mb3JtYXREYXRlIH0gZnJvbSAnY29tbW9uL2pzL2RhdGUnOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBCU2Nyb2xsIGZyb20gJ0BiZXR0ZXItc2Nyb2xsL2NvcmUnOyAvLyBjb25zdCBQT1NJVElWRSA9IDAKLy8gY29uc3QgTkVHQVRJVkUgPSAxCgp2YXIgQUxMID0gMjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93RmxhZzogZmFsc2UsCiAgICAgIHNlbGVjdFR5cGU6IEFMTCwKICAgICAgb25seUNvbnRlbnQ6IGZhbHNlLAogICAgICBkZXNjOiB7CiAgICAgICAgYWxsOiAn5YWo6YOoJywKICAgICAgICBwb3NpdGl2ZTogJ+aOqOiNkCcsCiAgICAgICAgbmVnYXRpdmU6ICflkJDmp70nCiAgICAgIH0KICAgIH07CiAgfSwKICBwcm9wczogewogICAgZm9vZDogT2JqZWN0CiAgfSwKICBtZXRob2RzOiB7CiAgICBzaG93OiBmdW5jdGlvbiBzaG93KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5zaG93RmxhZyA9IHRydWU7CiAgICAgIHRoaXMuc2VsZWN0VHlwZSA9IEFMTDsgLy8g5Y+q55yL5pyJ5YaF5a6555qECgogICAgICB0aGlzLm9ubHlDb250ZW50ID0gZmFsc2U7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoIV90aGlzLmZvb2RTY3JvbGwpIHsKICAgICAgICAgIF90aGlzLmZvb2RTY3JvbGwgPSBuZXcgQlNjcm9sbChfdGhpcy4kcmVmcy5mb29kV2VwcGVyLCB7CiAgICAgICAgICAgIGNsaWNrOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuZm9vZFNjcm9sbC5yZWZyZXNoKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoaWRlOiBmdW5jdGlvbiBoaWRlKCkgewogICAgICB0aGlzLnNob3dGbGFnID0gZmFsc2U7CiAgICB9LAogICAgYWRkY2FydDogZnVuY3Rpb24gYWRkY2FydCgpIHsKICAgICAgaWYgKCF0aGlzLmZvb2QuY291bnQpIHsKICAgICAgICBWdWUuc2V0KHRoaXMuZm9vZCwgJ2NvdW50JywgMSk7CiAgICAgIH0KICAgIH0sCiAgICBzdGVtcFRvRGF0ZTogZnVuY3Rpb24gc3RlbXBUb0RhdGUoc3RlbXApIHsKICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShzdGVtcCk7CiAgICAgIHJldHVybiBkYXRlOwogICAgfSwKICAgIHNlbGVjdFJhdGluZzogZnVuY3Rpb24gc2VsZWN0UmF0aW5nKHR5cGUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLnNlbGVjdFR5cGUgPSB0eXBlOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLmZvb2RTY3JvbGwucmVmcmVzaCgpOwogICAgICB9KTsKICAgIH0sCiAgICBuZWVkU2hvdzogZnVuY3Rpb24gbmVlZFNob3codHlwZSwgdGV4dCkgewogICAgICBpZiAodGhpcy5vbmx5Q29udGVudCAmJiAhdGV4dCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc2VsZWN0VHlwZSA9PT0gQUxMKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHR5cGUgPT09IHRoaXMuc2VsZWN0VHlwZTsKICAgICAgfQogICAgfSwKICAgIHRvZ2dsZUNvbnRlbnQ6IGZ1bmN0aW9uIHRvZ2dsZUNvbnRlbnQoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5vbmx5Q29udGVudCA9ICF0aGlzLm9ubHlDb250ZW50OwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLmZvb2RTY3JvbGwucmVmcmVzaCgpOwogICAgICB9KTsKICAgIH0KICB9LAogIGZpbHRlcnM6IHsKICAgIGZvcm1hdERhdGU6IGZ1bmN0aW9uIGZvcm1hdERhdGUodGltZSkgewogICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpOwogICAgICByZXR1cm4gX2Zvcm1hdERhdGUoZGF0ZSwgJ3l5eXktTU0tZGQgaGg6bW0nKTsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIENhcnRDb250cm9sOiBDYXJ0Q29udHJvbCwKICAgIFNwbGljZUxpbmU6IFNwbGljZUxpbmUsCiAgICBSYXRpbmdzZWxlY3Q6IFJhdGluZ3NlbGVjdAogIH0KfTs="},{"version":3,"sources":["food.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA,OAAA,WAAA,MAAA,wCAAA;AACA,OAAA,UAAA,MAAA,sCAAA;AACA,OAAA,YAAA,MAAA,0CAAA;AACA,SAAA,UAAA,IAAA,WAAA,QAAA,gBAAA;AACA,OAAA,GAAA,MAAA,KAAA;AACA,OAAA,OAAA,MAAA,qBAAA,C,CACA;AACA;;AACA,IAAA,GAAA,GAAA,CAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,KADA;AAEA,MAAA,UAAA,EAAA,GAFA;AAGA,MAAA,WAAA,EAAA,KAHA;AAIA,MAAA,IAAA,EAAA;AACA,QAAA,GAAA,EAAA,IADA;AAEA,QAAA,QAAA,EAAA,IAFA;AAGA,QAAA,QAAA,EAAA;AAHA;AAJA,KAAA;AAUA,GAZA;AAaA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AADA,GAbA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,IAAA,EAAA,gBAAA;AAAA;;AACA,WAAA,QAAA,GAAA,IAAA;AACA,WAAA,UAAA,GAAA,GAAA,CAFA,CAGA;;AACA,WAAA,WAAA,GAAA,KAAA;AACA,WAAA,SAAA,CAAA,YAAA;AACA,YAAA,CAAA,KAAA,CAAA,UAAA,EAAA;AACA,UAAA,KAAA,CAAA,UAAA,GAAA,IAAA,OAAA,CAAA,KAAA,CAAA,KAAA,CAAA,UAAA,EAAA;AACA,YAAA,KAAA,EAAA;AADA,WAAA,CAAA;AAGA,SAJA,MAIA;AACA,UAAA,KAAA,CAAA,UAAA,CAAA,OAAA;AACA;AACA,OARA;AASA,KAfA;AAgBA,IAAA,IAAA,EAAA,gBAAA;AACA,WAAA,QAAA,GAAA,KAAA;AACA,KAlBA;AAmBA,IAAA,OAAA,EAAA,mBAAA;AACA,UAAA,CAAA,KAAA,IAAA,CAAA,KAAA,EAAA;AACA,QAAA,GAAA,CAAA,GAAA,CAAA,KAAA,IAAA,EAAA,OAAA,EAAA,CAAA;AACA;AACA,KAvBA;AAwBA,IAAA,WAAA,EAAA,qBAAA,KAAA,EAAA;AACA,UAAA,IAAA,GAAA,IAAA,IAAA,CAAA,KAAA,CAAA;AACA,aAAA,IAAA;AACA,KA3BA;AA4BA,IAAA,YAAA,EAAA,sBAAA,IAAA,EAAA;AAAA;;AACA,WAAA,UAAA,GAAA,IAAA;AACA,WAAA,SAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,UAAA,CAAA,OAAA;AACA,OAFA;AAGA,KAjCA;AAkCA,IAAA,QAAA,EAAA,kBAAA,IAAA,EAAA,IAAA,EAAA;AACA,UAAA,KAAA,WAAA,IAAA,CAAA,IAAA,EAAA;AACA,eAAA,KAAA;AACA;;AACA,UAAA,KAAA,UAAA,KAAA,GAAA,EAAA;AACA,eAAA,IAAA;AACA,OAFA,MAEA;AACA,eAAA,IAAA,KAAA,KAAA,UAAA;AACA;AACA,KA3CA;AA4CA,IAAA,aAAA,EAAA,yBAAA;AAAA;;AACA,WAAA,WAAA,GAAA,CAAA,KAAA,WAAA;AACA,WAAA,SAAA,CAAA,YAAA;AACA,QAAA,MAAA,CAAA,UAAA,CAAA,OAAA;AACA,OAFA;AAGA;AAjDA,GAhBA;AAmEA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,sBACA,IADA,EACA;AACA,UAAA,IAAA,GAAA,IAAA,IAAA,CAAA,IAAA,CAAA;AACA,aAAA,WAAA,CAAA,IAAA,EAAA,kBAAA,CAAA;AACA;AAJA,GAnEA;AAyEA,EAAA,UAAA,EAAA;AACA,IAAA,WAAA,EAAA,WADA;AAEA,IAAA,UAAA,EAAA,UAFA;AAGA,IAAA,YAAA,EAAA;AAHA;AAzEA,CAAA","sourcesContent":["<template>\r\n<div v-show=\"showFlag\" class=\"food\" ref=\"foodWepper\">\r\n  <div class=\"food-content\">\r\n    <div class=\"desc-img-swapper\">\r\n      <img :src=\"food.image\" alt=\"\">\r\n      <div class=\"back\" @click=\"hide\">\r\n        <i class=\"icon-arrow_lift\"></i>\r\n      </div>\r\n    </div>\r\n    <div class=\"content\">\r\n      <h2 class=\"name\">{{food.name}}</h2>\r\n      <div class=\"extra\">\r\n        <span class=\"count\">月售{{food.sellCount}}份</span>\r\n        <span>好评率{{food.rating}}</span>\r\n      </div>\r\n      <div class=\"price\">\r\n        <span class=\"new-price\">￥{{food.price}}</span>\r\n        <span v-show=\"food.oldPrice\" class=\"old-price\">￥{{food.oldPrice}}</span>\r\n      </div>\r\n      <!-- 加入购物车，增加减少控件 -->\r\n      <div class=\"control-swepper\">\r\n        <div v-if=\"!this.food.count\" class=\"cart-control\" @click=\"addcart\">加入购物车</div>\r\n        <CartControl v-else :food=\"this.food\"></CartControl>\r\n      </div>\r\n    </div>\r\n    <SpliceLine />\r\n    <div v-show=\"this.food.info\" class=\"desc\">\r\n      <span class=\"detail-name\">商品介绍</span>\r\n      <span class=\"detail-content\">{{this.food.info}}</span>\r\n    </div>\r\n    <SpliceLine v-show=\"this.food.info\" />\r\n    <div class=\"rating\">\r\n      <h1 class=\"title\">商品评价</h1>\r\n      <Ratingselect\r\n        @select=\"selectRating\"\r\n        @toggle=\"toggleContent\"\r\n        :ratings=\"food.ratings\"\r\n        :select-type=\"selectType\"\r\n        :only-content=\"onlyContent\"\r\n        :desc=\"desc\"\r\n        class=\"ratingselect\"\r\n      ></Ratingselect>\r\n    </div>\r\n    <div class=\"list-ratings\">\r\n      <ul v-show=\"food.ratings && food.ratings.length\">\r\n        <li\r\n          v-for=\"(rating, index) in food.ratings\"\r\n          v-show=\"needShow(rating.rateType, rating.text)\"\r\n          :key=\"index\"\r\n          class=\"rating-item\"\r\n        >\r\n          <span class=\"date item\">{{rating.rateTime | formatDate}}</span>\r\n          <span class=\"avatar\"><img width=\"12px\" height=\"12px\" :src=\"rating.avatar\" alt=\"\"></span>\r\n          <span class=\"user-name item\">{{rating.username}}</span>\r\n          <p class=\"\">\r\n            <span :class=\"{'icon-thumb_up':rating.rateType===0,'icon-thumb_down':rating.rateType===1}\"></span>\r\n            <span class=\"rating-content\">{{rating.text}}</span>\r\n          </p>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\nimport CartControl from 'components/cartcontrol/cartcontrol.vue'\r\nimport SpliceLine from 'components/spliceline/spliceline.vue'\r\nimport Ratingselect from 'components/ratingselect/ratingselect.vue'\r\nimport { formatDate } from 'common/js/date'\r\nimport Vue from 'vue'\r\nimport BScroll from '@better-scroll/core'\r\n// const POSITIVE = 0\r\n// const NEGATIVE = 1\r\nconst ALL = 2\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      showFlag: false,\r\n      selectType: ALL,\r\n      onlyContent: false,\r\n      desc: {\r\n        all: '全部',\r\n        positive: '推荐',\r\n        negative: '吐槽'\r\n      }\r\n    }\r\n  },\r\n  props: {\r\n    food: Object\r\n  },\r\n  methods: {\r\n    show: function() {\r\n      this.showFlag = true\r\n      this.selectType = ALL\r\n      // 只看有内容的\r\n      this.onlyContent = false\r\n      this.$nextTick(() => {\r\n        if (!this.foodScroll) {\r\n          this.foodScroll = new BScroll(this.$refs.foodWepper, {\r\n            click: true\r\n          })\r\n        } else {\r\n          this.foodScroll.refresh()\r\n        }\r\n      })\r\n    },\r\n    hide: function () {\r\n      this.showFlag = false\r\n    },\r\n    addcart: function () {\r\n      if (!this.food.count) {\r\n        Vue.set(this.food, 'count', 1)\r\n      }\r\n    },\r\n    stempToDate: function(stemp) {\r\n      let date = new Date(stemp)\r\n      return date\r\n    },\r\n    selectRating: function(type) {\r\n      this.selectType = type\r\n      this.$nextTick(() => {\r\n        this.foodScroll.refresh()\r\n      })\r\n    },\r\n    needShow: function (type, text) {\r\n      if (this.onlyContent && !text) {\r\n        return false\r\n      }\r\n      if (this.selectType === ALL) {\r\n        return true\r\n      } else {\r\n        return type === this.selectType\r\n      }\r\n    },\r\n    toggleContent: function () {\r\n      this.onlyContent = !this.onlyContent\r\n      this.$nextTick(() => {\r\n        this.foodScroll.refresh()\r\n      })\r\n    }\r\n  },\r\n  filters: {\r\n    formatDate(time) {\r\n      let date = new Date(time)\r\n      return formatDate(date, 'yyyy-MM-dd hh:mm')\r\n    }\r\n  },\r\n  components: {\r\n    CartControl,\r\n    SpliceLine,\r\n    Ratingselect\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n@import 'common/stylus/mixin.styl'\r\n  .food\r\n    position: fixed\r\n    top: 0\r\n    left: 0\r\n    bottom: 48px\r\n    z-index: 30\r\n    width: 100%\r\n    background-color: rgb(255, 255, 255)\r\n    overflow: hidden\r\n    .desc-img-swapper\r\n      position: relative\r\n      height: 375px\r\n      width: 100%\r\n      img\r\n        height: 100%\r\n      .back\r\n        position: absolute\r\n        top: 10px\r\n        left: 0\r\n        .icon-arrow_lift\r\n          display: block\r\n          padding: 10px\r\n          font-size: 20px\r\n          color: #fff\r\n    .content\r\n      position: relative\r\n      padding: 18px\r\n      .name\r\n        font-size: 14px\r\n        line-height: 14px\r\n        font-weight: 700\r\n        color: rgb(7, 17, 27)\r\n      .extra\r\n        margin-top: 18px\r\n        font-size: 10px\r\n        color: rgb(147, 153, 159)\r\n        line-height: 10px\r\n        .count\r\n          margin-right: 12px\r\n      .price\r\n        margin-top: 18px\r\n        font-size: 10px\r\n        .new-price\r\n          font-size: 14px\r\n          line-height: 24px\r\n          font-weight: 700\r\n          color: rgb(240, 20, 20)\r\n        .old-price\r\n          line-height: 24px\r\n          color: rgb(147, 153, 159)\r\n          text-decoration: line-through\r\n      .control-swepper\r\n        position: absolute\r\n        bottom: 18px\r\n        right: 18px\r\n        .cart-control\r\n          box-sizing: border-box\r\n          padding: 0 6px\r\n          height: 24px\r\n          line-height: 24px\r\n          font-size: 10px\r\n          text-align: center\r\n          border-radius: 12px 12px\r\n          color: rgb(255, 255, 255)\r\n          background: rgb(0, 160, 220)\r\n    .desc\r\n      padding: 18px\r\n      .detail-name\r\n        display: block\r\n        font-size: 14px\r\n        line-height: 14px\r\n        color: rgb(7, 17, 27)\r\n      .detail-content\r\n        font-size: 12px\r\n        line-height: 24px\r\n        font-weight: 200\r\n        color: rgb(77, 85, 93)\r\n    .rating\r\n      padding: 18px 18px 0\r\n      border-bottom: 1px solid rgb(147, 153, 159)\r\n      .name\r\n        font-size: 14px\r\n        font-weight: 300\r\n        color(7, 17, 27)\r\n        line-height: 14px\r\n      .ratingselect\r\n        margin-top: 18px\r\n    .list-ratings\r\n      margin:16px\r\n      .rating-item\r\n        margin-top: 16px\r\n        padding-bottom: 16px\r\n        border-1px(rgb(147, 153, 159))\r\n        .icon-thumb_up\r\n          font-size: 12px\r\n          color: rgb(0, 160, 220)\r\n          line-height: 24px\r\n        .icon-thumb_down\r\n          font-size: 12px\r\n          color: rgb(147, 153, 159)\r\n          line-height: 24px\r\n      .item\r\n        font-size: 10px\r\n        color: rgb(147, 153, 159)\r\n        line-height: 12px\r\n      .avatar\r\n        display: inline-block\r\n        float: right\r\n        margin-left: 6px\r\n        width: 12px\r\n        height: 12px\r\n        border-radius: 6px\r\n        overflow: hidden\r\n      .user-name\r\n        display: inline-block\r\n        float: right\r\n      .rating-content\r\n        display: inline-block\r\n        margin-left: 4px\r\n        font-size: 12px\r\n        color: rgb(7, 17, 27)\r\n        line-height: 16px\r\n</style>\r\n"],"sourceRoot":"src/components/food"}]}